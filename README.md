# Call Analyzer - Система анализа звонков

## Описание проекта

Call Analyzer - это комплексная система для автоматического анализа телефонных звонков, включающая:
- Автоматическую транскрипцию аудиофайлов через Speechmatics API
- AI-анализ звонков через DeepSeek API
- Уведомления в Telegram
- Генерацию отчетов в Excel
- Управление переводами и отзывами клиентов
- Детекцию юридических лиц

## Веб-интерфейс

Для удобного управления всеми функциями системы создан веб-интерфейс, который позволяет настраивать все параметры без изменения кода.

### Запуск веб-интерфейса

1. **Автоматический запуск:**
   ```
   start_web_interface.bat
   ```

2. **Ручной запуск:**
   ```bash
   cd web_interface
   pip install -r requirements.txt
   python app.py
   ```

3. **Остановка:**
   ```
   stop_web_interface.bat
   ```

4. **Проверка статуса:**
   ```
   status_web_interface.bat
   ```

5. **Перезапуск:**
   ```
   restart_web_interface.bat
   ```

### Доступ к веб-интерфейсу

После запуска веб-интерфейс будет доступен по адресу: **http://localhost:5000**

## Основные функции веб-интерфейса

### 1. Главная панель
- Обзор системы и статистика
- Быстрый доступ к основным функциям
- Статус сервисов

### 2. Конфигурация
- **API ключи:** Speechmatics, DeepSeek, Telegram
- **Пути к файлам:** база записей, промпты, словари
- **Настройки уведомлений:** чаты, каналы
- **Параметры анализа:** модели, таймауты

### 3. Станции
- **Управление станциями:** добавление, редактирование, удаление
- **Настройка чатов:** привязка Telegram чатов к станциям
- **Коды станций:** управление кодами и названиями
- **Каналы уведомлений:** настройка каналов для разных станций

### 4. Промпты
- **Основные промпты:** для разных типов станций
- **Промпты переводов:** для анализа переводов
- **Промпты отзывов:** для анализа отзывов
- **Промпты юридических лиц:** для детекции юр.лиц
- **Промпты качества:** для оценки качества звонков

### 5. Словари
- **Дополнительная лексика:** для улучшения транскрипции
- **Ключевые слова:** для детекции юридических лиц
- **Специальные термины:** для разных станций

### 6. Отчеты
- **Еженедельные отчеты:** генерация и отправка
- **Отчеты по станциям:** индивидуальные отчеты
- **Отчеты качества:** анализ качества обслуживания
- **История отчетов:** просмотр предыдущих отчетов

### 7. Переводы
- **Активные переводы:** просмотр и управление
- **История переводов:** завершенные переводы
- **Настройки уведомлений:** сроки и напоминания
- **Статистика переводов:** аналитика по переводам

### 8. Отзывы
- **Активные отзывы:** просмотр и управление
- **История отзывов:** завершенные отзывы
- **Настройки уведомлений:** сроки и напоминания
- **Статистика отзывов:** аналитика по отзывам

### 9. Логи
- **Системные логи:** просмотр логов приложения
- **Логи ошибок:** отслеживание проблем
- **Логи транскрипции:** детали обработки аудио
- **Логи анализа:** результаты AI-анализа

## Структура проекта

```
CallRecords/
├── call_analyzer/           # Основной модуль анализа
│   ├── main.py             # Главный файл приложения
│   ├── config.py           # Конфигурация
│   ├── call_handler.py     # Обработчик звонков
│   ├── utils.py            # Утилиты
│   ├── exental_alert.py    # Расширенные уведомления
│   ├── reports/            # Модули отчетов
│   └── transfer_recall/    # Модули переводов и отзывов
├── web_interface/          # Веб-интерфейс
│   ├── app.py              # Flask приложение
│   ├── templates/          # HTML шаблоны
│   └── static/             # CSS, JS, изображения
├── config.txt              # Основной конфиг
├── prompts.yaml            # Промпты для AI
├── additional_vocab.yaml    # Дополнительная лексика
├── transfer_cases.json     # Данные переводов
├── recall_cases.json       # Данные отзывов
└── *.bat                   # Скрипты управления
```

## Требования

- Python 3.8+
- Flask
- PyYAML
- requests
- pandas
- openpyxl
- watchdog
- APScheduler

## Установка

1. Установите Python 3.8+
2. Создайте виртуальное окружение:
   ```bash
   python -m venv venv
   venv\Scripts\activate
   ```
3. Установите зависимости:
   ```bash
   pip install -r web_interface/requirements.txt
   ```
4. Настройте конфигурацию через веб-интерфейс
5. Запустите систему:
   ```bash
   start_service.bat
   ```

## Поддержка

Для получения поддержки или сообщения об ошибках используйте веб-интерфейс или обратитесь к администратору системы.


